<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="keywords" content="乌鲁木齐市存量房交易系统,乌鲁木齐房产交易,存量房交易系统" />
    <meta name="description" content="乌鲁木齐市存量房交易系统,乌鲁木齐房产交易,存量房交易系统" />
    <link rel="Shortcut icon" href="image/logo.ico">

    <link rel="stylesheet" href="js/jquery-ui-1.12.1.custom/jquery-ui.css"/>
    <link rel="stylesheet" href="js/paging/paging.css"/>
    <link rel="stylesheet" href="css/countState.css"/>
    <script type="text/javascript" src="js/jquery.min-1.9.1.js"></script>
    <script src="js/storage.js"></script>
    <script src="data/data.js"></script>
    <script src="js/paging/paging.js"></script>
    <script src="js/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
    <script type="text/javascript" src="js/base-config/base.js"></script>
</head>
<body>
<div class="tb_container">
    <div class="top-xm">
        <p>
            <input class="houseNum" type="text" placeholder="按产权证编号搜索"/>
            <input id="startTime" type="text" placeholder="按验证日期查询(开始日期)" readonly="readonly"/>
            <span class="line"></span>
            <input id="endTime" type="text" placeholder="按验证日期查询(结束日期)" readonly="readonly"/>
            <a href="#" class="big"></a>
        </p>
        <p class="p_after">
            <a href="" class="afterArrow">房源公示</a>
            <a href="" class="afterArrow">房源公示信息</a>
            <a href="#" class="reload">刷新</a>
        </p>
    </div>
    <div class="table-border">
      <table>
          <!--<tr class="tr_th">
              <th>序号</th>
              <th>验证日期</th>
              <th>产权证编号</th>
              <th>验证申请人</th>
              <th>联系电话</th>
              <th>查封状态</th>
              <th>冻结状态</th>
              <th>抵押状态</th>
              <th>预告状态</th>
              <th>存量房签约状态</th>
          </tr>
        <tr>
              <td>1</td>
              <td>2017.06.08</td>
              <td>201706080000099</td>
              <td>程红</td>
              <td>17718762345</td>
              <td>未查封</td>
              <td>未冻结</td>
              <td>未抵押</td>
              <td>无房贷</td>
              <td>未签约</td>
          </tr>-->
          <!--<tr>
             <td>2</td>
             <td>2017.07.09</td>
             <td>201706080008888</td>
             <td>万钢</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>3</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>4</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>5</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>6</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>7</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>8</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>9</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>
         <tr>
             <td>10</td>
             <td>2017.06.08</td>
             <td>201706080000099</td>
             <td>程红</td>
             <td>17718762345</td>
             <td>未查封</td>
             <td>未冻结</td>
             <td>未抵押</td>
             <td>无房贷</td>
             <td>未签约</td>
         </tr>

  -->
      </table>
      <!--底部分页-->
      <div class="foot">
          <p>共 <span class="totalCount"></span>条记录&nbsp&nbsp <span class="currentPage">1</span>/<span class="totalPage"></span>页</p>
          <div id="pageTool">

          </div>
      </div>
    </div>
</div>
<script>
function toPage(_num){
    var _tmp={};
    for(var i=0;i<storage.getStorage('fyyzData').length;i++){
        if(storage.getStorage('fyyzData')[i].data_2.common.obligee_right_num == _num){
            _tmp = storage.getStorage('fyyzData')[i];
        }
    }
    storage.removeStorage('fyyzDataSingle')
    storage.setStorage('fyyzDataSingle',_tmp);

    window.location.href = 'verification.html?right_num='+_num;
}


    $(function(){


        /*全局变量定义*/
        var prePage=15;
//        var currentPage=1;

       /*定义ajax发送成功之后执行的函数*/
        var ajax_suc=function(data,currentPage){

            //数据存储到本地存储中
            //storage.removeStorage('fangData');
            //storage.setStorage('fangData',data.info);

            var _html = '<tr class="tr_th">' +
                        '<th>序号</th>' +
                        '<th>验证日期</th> ' +
                        '<th>产权证编号</th>' +
                        '<th>权利人</th> ' +
                        '<th>查封状态</th> ' +
                        '<th>冻结状态</th> ' +
                        '<th>抵押状态</th> ' +
                        '<th>预告状态</th> ' +
                        '<th>存量房签约状态</th>' +
                    '</tr>';
            for(var i=0;i<data.length;i++){

                data[i].sealUp = sealStatus[data[i].sealUp];
                data[i].freeze = freezeStatus[data[i].freeze];
                data[i].pledge = pledgeStatus[data[i].pledge];
                data[i].foreshow = foreshowStatus[data[i].foreshow];
                data[i].sign = signStatus[data[i].sign];

                _html += "<tr>" +
                        "<td>"+(prePage*(currentPage-1)+i+1)+"</td>" +
                        "<td>"+data[i].date+"</td>" +
                        "<td><a href='javascript:toPage(\""+data[i].num+"\")' class='underline-a'>"+data[i].num+"</a></td>" +
                        "<td>"+data[i].name+"</td>" +
                        "<td>"+data[i].sealUp+"</td>" +
                        "<td>"+data[i].freeze+"</td>" +
                        "<td>"+data[i].pledge+"</td>" +
                        "<td>"+data[i].foreshow+"</td>" +
                        "<td>"+data[i].sign+"</td>" +
                        "</tr>";
            }
            $('table').html(_html);
          
            /*table斑马线设置*/
            $('tr:even').css('background','#f5f5f5');
        };


        var ajax_suc_head=function(){
            var _html = '<tr class="tr_th">' +
                        '<th>序号</th>' +
                        '<th>验证日期</th> ' +
                        '<th>产权证编号</th>' +
                        '<th>权利人</th> ' +
                        '<th>查封状态</th> ' +
                        '<th>冻结状态</th> ' +
                        '<th>抵押状态</th> ' +
                        '<th>预告状态</th> ' +
                        '<th>存量房签约状态</th>' +
                    '</tr>';
            $('table').html(_html);
          
            /*table斑马线设置*/
            $('tr:even').css('background','#f5f5f5');
        }

        /*发送请求获取数据渲染表格*/
        /*$.ajax({
            url:'data/housePublicity.json',
            type:'post',
            success:function(data){
                data = JSON.parse(data);
                ajax_suc(data,1);

                $('#pageTool').Paging({
                    pagesize:prePage,
                    count:data.total,
                    callback:function(page,size,count){
                        $.ajax({
                            url:'data/housePublicity.json',
                            type:'post',
                            success:function(data){
                                data = JSON.parse(data);
                                ajax_suc(data,page);

                                $(".currentPage").html(page);
                                $('.totalCount').text(data.total);
                                var totalPage=Math.ceil(data.total/15);
                                $(".totalPage").html(totalPage);

                            },
                            error:function(errorMeg){
                                //alert(errorMeg);
                            }
                        });
                    }
                });
                $('.totalCount').text(data.total);
                var totalPage=Math.ceil(data.total/15);
                $(".totalPage").html(totalPage);
            },
            error:function(errorMeg){
                //console.log(errorMeg);
            }
        });*/




        /*从本地拿数据*/
        var _obtain = storage.getStorage('fyyzData');
        if(_obtain){
            if(_obtain.length){
                console.log('有数据');

                var _info=[];
                for(var i=0;i<_obtain.length;i++){
                    var _tmp = {};
                    _tmp.date = _obtain[i].data_1.date;
                    _tmp.num =  _obtain[i].data_2.common.obligee_right_num;
                    _tmp.name =  _obtain[i].data_2.obligee[0].obligee_name;
                    _tmp.sealUp =  _obtain[i].data_3.searchResult.sealUp;
                    _tmp.freeze =  _obtain[i].data_3.searchResult.freeze;
                    _tmp.pledge =  _obtain[i].data_3.searchResult.pledge;
                    _tmp.foreshow =  _obtain[i].data_3.searchResult.foreshow;
                    _tmp.sign =  _obtain[i].data_3.searchResult.sign;

                    _tmp.obligeeInfo = {
                        obligee:_obtain[i].data_2.obligee,
                        common:_obtain[i].data_2.common
                    }

                    _info.push(_tmp);
                }

                ajax_suc(_info,1);
            }else{
                console.log('无数据');
                ajax_suc_head();
            }
        }else{
            console.log('无数据');
            ajax_suc_head();
        }
        

        /*
        ajax_suc(data,1);
        console.log(_obtain)
        $('#pageTool').Paging({
            pagesize:prePage,
            count:data.total,
            callback:function(page,size,count){
                $.ajax({
                    url:'data/housePublicity.json',
                    type:'post',
                    success:function(data){
                        data = JSON.parse(data);
                        ajax_suc(data,page);

                        $(".currentPage").html(page);
                        $('.totalCount').text(data.total);
                        var totalPage=Math.ceil(data.total/15);
                        $(".totalPage").html(totalPage);

                    },
                    error:function(errorMeg){
                        //alert(errorMeg);
                    }
                });
            }
        });*/




        /*dataPicker使用初始化*/
        /*$('#startTime').datepicker();
        $('#endTime').datepicker();*/
        /*datePicker汉化*/


       /* $("#startTime,#endTime").datepicker({//添加日期选择功能
            numberOfMonths:1,//显示几个月
            showButtonPanel:true,//是否显示按钮面板
            dateFormat: 'yy-mm-dd',//日期格式
            clearText:"清除",//清除日期的按钮名称
            closeText:"关闭",//关闭选择框的按钮名称
            yearSuffix: '年', //年的后缀
            showMonthAfterYear:true,//是否把月放在年的后面
//            defaultDate:'2011-03-10',//默认日期
            minDate:'2011-03-05',//最小日期
            maxDate:'2019-03-20',//最大日期
            monthNames: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
            dayNames: ['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],
            dayNamesShort: ['周日','周一','周二','周三','周四','周五','周六'],
            dayNamesMin: ['日','一','二','三','四','五','六']

        });*/
        var dateFormat = "mm/dd/yy",
            from = $( "#startTime" ).datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths:1,
                yearSuffix: '年', //年的后缀
                clearText:"清除",//清除日期的按钮名称
                closeText:"关闭",//关闭选择框的按钮名称
                showMonthAfterYear:true,//是否把月放在年的后面
                monthNames: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
                dayNames: ['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],
                dayNamesShort: ['周日','周一','周二','周三','周四','周五','周六'],
                dayNamesMin: ['日','一','二','三','四','五','六']

            }).on( "change", function() {
                to.datepicker( "option", "minDate", getDate( this ) );
            }),
            to = $( "#endTime" ).datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                yearSuffix: '年', //年的后缀
                clearText:"清除",//清除日期的按钮名称
                closeText:"关闭",//关闭选择框的按钮名称
                showMonthAfterYear:true,//是否把月放在年的后面
                numberOfMonths: 1,
                monthNames: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
                dayNames: ['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],
                dayNamesShort: ['周日','周一','周二','周三','周四','周五','周六'],
                dayNamesMin: ['日','一','二','三','四','五','六']

            }).on( "change", function() {
                from.datepicker( "option", "maxDate", getDate( this ) );
            });
        function getDate( element ) {
            var date;
            try {
                date = $.datepicker.parseDate( dateFormat, element.value );
            } catch( error ) {
                date = null;
            }
            return date;
        }

    })
</script>

</body>
</html>